# Platform - Notas del Release v9.5.4

| Clave | Valor |
| :--- | :--- |
| **Versión** | `v9.5.4` |
| **Fecha de Despliegue** | `2026-02-26` |
| **Servicios Afectados** | `PLATFORM` |
| **Tipo de Release** | `Patch` |
| **Estado** | `Desplegado` |
| **Jira Release** | [Pendiente] |

---

### **Resumen Ejecutivo**

Esta actualización mejora el procesamiento de pedidos complejos que contienen productos repetidos (como múltiples hamburguesas o combos iguales). El sistema ahora identifica y asigna correctamente las personalizaciones de cada producto individual, asegurando que el cliente reciba exactamente lo solicitado y evitando confusiones operativas.

---

### **Mejoras**

*   **Optimización en la Gestión de Artículos Duplicados (PedidosYa)**
    *   **Descripción:** Se ha mejorado la lógica de asignación para que los extras y remociones se apliquen a la instancia correcta del producto cuando hay duplicados en el pedido.
    *   **Servicio(s) Afectado(s):** `PLATFORM`

---

### **Detalles Técnicos (Para Audiencia Técnica)**

*   **Tarea de Despliegue:** `[AWS-TASK-XXX]`

*   **Commit(s):** `5d9a58ec48f3a82f4519b05829059ac5466856e2`

*   **Descripción Técnica General:** Se migró de una búsqueda escalar basada en SKU a una gestión de colecciones mediante `filter()`, permitiendo distribuir personalizaciones sobre un `emptyItem` priorizado.

*   **Cambios por Componente:**
    *   **`api/src/platforms/interfaces/pedidosYa.js`:**
        *   Reemplazo de `find()` por `filter()` para manejar redundancia de subitems. Implementación de lógica de búsqueda de ítems sin personalizaciones previas para evitar colisiones de datos. Normalización de precios mediante `parseFloat`.
